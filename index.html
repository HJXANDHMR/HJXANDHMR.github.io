
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Android学习</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="何健雄">
    

    
    <meta name="description" content="Android 开发,java学习,ListView,Android Studio,Hexo,MarkDown.">
<meta property="og:type" content="website">
<meta property="og:title" content="Android学习">
<meta property="og:url" content="http://HJXANDHMR.github.io/index.html">
<meta property="og:site_name" content="Android学习">
<meta property="og:description" content="Android 开发,java学习,ListView,Android Studio,Hexo,MarkDown.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android学习">
<meta name="twitter:description" content="Android 开发,java学习,ListView,Android Studio,Hexo,MarkDown.">

    
    <link rel="alternative" href="/atom.xml" title="Android学习" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Android学习" title="Android学习"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Android学习">Android学习</a></h1>
				<h2 class="blog-motto">学有所思，思有所悟，悟有所行。</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/">简介</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:HJXANDHMR.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/06/Linux-DirectoryProcessingCommand/" title="Linux文件目录处理命令" itemprop="url">Linux文件目录处理命令</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-05-06T04:59:53.715Z" itemprop="datePublished"> 发表于 2016-05-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>最近在学习Linux，在Linux下开发Android真是太爽啦，感兴趣的朋友也可以去试试，我是在虚拟机下装的Ubuntu 15.10，这个版本比较好用。今天我们就来学习下Linux的命令。</p>
<h2 id="目录操作命令"><a href="#目录操作命令" class="headerlink" title="目录操作命令"></a>目录操作命令</h2><h3 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 目录名  如  mkdir hjx</span><br></pre></td></tr></table></figure>
<h3 id="创建子目录"><a href="#创建子目录" class="headerlink" title="创建子目录"></a>创建子目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p  目录名/目录   如 mkdir -p hjx/hjx</span><br></pre></td></tr></table></figure>
<h3 id="进入文件目录"><a href="#进入文件目录" class="headerlink" title="进入文件目录"></a>进入文件目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> 目录名    如 <span class="built_in">cd</span> hjx</span><br></pre></td></tr></table></figure>
<h3 id="显示当前工作目录目录"><a href="#显示当前工作目录目录" class="headerlink" title="显示当前工作目录目录"></a>显示当前工作目录目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>
<h3 id="显示当前目录的子文件"><a href="#显示当前目录的子文件" class="headerlink" title="显示当前目录的子文件"></a>显示当前目录的子文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
<h3 id="Linux命令提示键-和目录补全键"><a href="#Linux命令提示键-和目录补全键" class="headerlink" title="Linux命令提示键,和目录补全键"></a>Linux命令提示键,和目录补全键</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">按 <span class="string">"TAB"</span>键可以快速补全文件和命令。 (非常好用，强烈推荐)</span><br></pre></td></tr></table></figure>
<h3 id="删除文件或文件目录"><a href="#删除文件或文件目录" class="headerlink" title="删除文件或文件目录"></a>删除文件或文件目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf  文件或目录名/   如 rm -rf hjx/</span><br></pre></td></tr></table></figure>
<h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp  文件名  目录名/  如  cp hjx hjx/</span><br></pre></td></tr></table></figure>
<h3 id="复制文件目录"><a href="#复制文件目录" class="headerlink" title="复制文件目录"></a>复制文件目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp  -r 目录名  目录名/  如  cp hjx hjx/</span><br></pre></td></tr></table></figure>
<h3 id="复制文件及其属性"><a href="#复制文件及其属性" class="headerlink" title="复制文件及其属性"></a>复制文件及其属性</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="_">-a</span> 文件名  目录名/   如 cp <span class="_">-a</span>  hjx hjx/</span><br></pre></td></tr></table></figure>
<h3 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv  文件  目录/   如 mv hjx hjx/</span><br></pre></td></tr></table></figure>
<h3 id="改文件名"><a href="#改文件名" class="headerlink" title="改文件名"></a>改文件名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv 原文件名 改名后文件名  如 mv hjx hjx1</span><br></pre></td></tr></table></figure>
<h2 id="Linux目录"><a href="#Linux目录" class="headerlink" title="Linux目录"></a>Linux目录</h2><p>Linux下默认有很多目录，我们来简单的学习下它。</p>
<p>/ 根目录<br>/bin 存放必要的命令<br>/boot 存放内核以及启动所需的文件等<br>/dev 存放设备文件<br>/etc 存放系统的配置文件<br>/home 用户文件的主目录，用户数据存放在其主目录中<br>/lib 存放必要的运行库<br>/mnt 存放临时的映射文件系统，我们常把软驱和光驱挂装在这里的floppy和cdrom子目录下。<br>/proc 存放存储进程和系统信息<br>/root 超级用户的主目录<br>/sbin 存放系统管理程序<br>/tmp 存放临时文件的目录<br>/usr 包含了一般不需要修改的应用程序，命令程序文件、程序库、手册和其它文档。<br>/var 包含系统产生的经常变化的文件</p>
<p>以上就是对文件目录操作的一些基本命令了。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Linux/">Linux</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/05/06/Linux-DirectoryProcessingCommand/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/05/06/Linux-DirectoryProcessingCommand/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/02/Android-NDK/" title="Android Studio 安装NDK" itemprop="url">Android Studio 安装NDK</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-05-02T12:16:55.644Z" itemprop="datePublished"> 发表于 2016-05-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Android 开发中会用到NDK，今天我们来学习下载Android Studio中怎样安装NDK.</p>
<h2 id="下载NDK"><a href="#下载NDK" class="headerlink" title="下载NDK"></a>下载NDK</h2><ol>
<li>打开Android Studio,选中model右键打开 Project Structure,然后点击Download Android NDK。</li>
</ol>
<p><img src="/images/AndroidNDK/Android_NDK.png" alt=""></p>
<ol>
<li><p>一般在谷歌下载很慢，可以复制下载地址，用迅雷下载。</p>
</li>
<li><p>下载完成以后将压缩包复制到SDK 的安装目录下，解压后就文件重命名为 ndk-bundle。</p>
</li>
<li><p>最后重新打开Project Structure，选择Android NDK 的目录。</p>
</li>
</ol>
<p><img src="/images/AndroidNDK/Android_NDK2.png" alt=""></p>
<p>到这为止，Android NDK已经安装完成了，快开始Android NDK 的学习之旅吧。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android-NDK/">Android NDK</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android-NDK/">Android NDK</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/05/02/Android-NDK/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/05/02/Android-NDK/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/26/Android-style/" title="Android shape" itemprop="url">Android shape</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-26T02:22:17.359Z" itemprop="datePublished"> 发表于 2016-04-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Android开发中我们经常会使用shape我总结了下它们地使用</p>
<h2 id="Android-shape"><a href="#Android-shape" class="headerlink" title="Android shape"></a>Android shape</h2><p>使用shape可以自定义形状，可以定义下面四种类型的形状，通过android:shape属性指定：</p>
<ul>
<li>rectangle: 矩形，默认的形状，可以画出直角矩形、圆角矩形、弧形等</li>
<li>oval: 椭圆形，用得比较多的是画正圆</li>
<li>line: 线形，可以画实线和虚线</li>
<li>ring: 环形，可以画环形进度条</li>
</ul>
<p>gradient代表渐变，可以按照如下的使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;gradient</span><br><span class="line">       android:angle=<span class="string">"0"</span></span><br><span class="line">       android:centerColor=<span class="string">"#ff0f00"</span></span><br><span class="line">       android:endColor=<span class="string">"#ff00ff"</span></span><br><span class="line">       android:startColor=<span class="string">"#00ff00"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>solid代表实心，可以按照如下的使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;solid android:color=<span class="string">"#F0FFFF"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>stroke代表描边，可以按照如下的使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;stroke</span><br><span class="line">       android:width=<span class="string">"10dp"</span></span><br><span class="line">       android:color=<span class="string">"#00FFFF"</span></span><br><span class="line">       android:dashGap=<span class="string">"5dp"</span></span><br><span class="line">       android:dashWidth=<span class="string">"5dp"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>corners代表圆角，可以按照如下的使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;corners android:radius=<span class="string">"100dp"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>这是完整的shape文件，定义在drawable目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;shape xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:shape=<span class="string">"rectangle"</span>&gt;</span><br><span class="line">    &lt;!-- 渐变 --&gt;</span><br><span class="line">    &lt;gradient</span><br><span class="line">        android:angle=<span class="string">"0"</span></span><br><span class="line">        android:centerColor=<span class="string">"#ff0f00"</span></span><br><span class="line">        android:endColor=<span class="string">"#ff00ff"</span></span><br><span class="line">        android:startColor=<span class="string">"#00ff00"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 实心 --&gt;</span><br><span class="line">    &lt;solid android:color=<span class="string">"#F0FFFF"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 描边 --&gt;</span><br><span class="line">    &lt;stroke</span><br><span class="line">        android:width=<span class="string">"10dp"</span></span><br><span class="line">        android:color=<span class="string">"#00FFFF"</span></span><br><span class="line">        android:dashGap=<span class="string">"5dp"</span></span><br><span class="line">        android:dashWidth=<span class="string">"5dp"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 圆角 --&gt;</span><br><span class="line">    &lt;corners android:radius=<span class="string">"100dp"</span> /&gt;</span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></table></figure>
<p>以上都是比较简单的使用shape。</p>
<p>这里推荐一个工具，可以可视化的生成shape，简直是开发神器 <a href="http://angrytools.com/android/button/" target="_blank" rel="external">自动生成shape</a></p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android/">Android</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android/">Android</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/26/Android-style/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/26/Android-style/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/22/Android-MVPDetailed/" title="Android MVP实例" itemprop="url">Android MVP实例</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-22T11:26:04.003Z" itemprop="datePublished"> 发表于 2016-04-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Android-MVP-实例"><a href="#Android-MVP-实例" class="headerlink" title="Android MVP 实例"></a>Android MVP 实例</h2><h3 id="Android-MVP-实例演示"><a href="#Android-MVP-实例演示" class="headerlink" title="Android MVP 实例演示"></a>Android MVP 实例演示</h3><p>效果展示</p>
<p><img src="/images/AndroidMVP/Android_MVP.gif" alt=""></p>
<h2 id="Android-MVP详解"><a href="#Android-MVP详解" class="headerlink" title="Android MVP详解"></a>Android MVP详解</h2><p> MVP 流程图</p>
<p><img src="/images/AndroidMVP/Android_MVP_structure.png" alt=""></p>
<p>说明：<br>步骤1：View引用Presenter<br>步骤2：Presenter调用Model，走Model具体逻辑<br>步骤3：Model逻辑实现，回调Presenter方法<br>步骤4：Presenter回调View</p>
<p>目录图</p>
<p><img src="/images/AndroidMVP/Android_MVP_catalog.png" alt=""></p>
<h3 id="MVP-model"><a href="#MVP-model" class="headerlink" title="MVP model"></a>MVP model</h3><p>IStudentModel.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public interface IStudentModel &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 保存学生信息</span><br><span class="line">     * @param id 学号</span><br><span class="line">     * @param name 姓名</span><br><span class="line">     * @param sex  性别</span><br><span class="line">     */</span><br><span class="line">    void save(int id,String name,String sex);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 读取学生信息</span><br><span class="line">     * @param id 学号</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    Student load(int id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> StudentModel.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class StudentModel implements IStudentModel &#123;</span><br><span class="line"></span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private String sex;</span><br><span class="line">    private SparseArray&lt;Student&gt; array = new SparseArray&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void save(int id,String name,String sex) &#123;</span><br><span class="line">        Student student = new Student();</span><br><span class="line">        student.setId(id);</span><br><span class="line">        student.setName(name);</span><br><span class="line">        student.setSex(sex);</span><br><span class="line">        array.append(id, student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Student load(int id) &#123;</span><br><span class="line">        Student notFound = new Student();</span><br><span class="line">        notFound.setName(<span class="string">"没有发现"</span>);</span><br><span class="line">        notFound.setSex(<span class="string">"没有发现"</span>);</span><br><span class="line">        Student student=array.get(id, notFound);</span><br><span class="line">        <span class="built_in">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="MVP-presenter"><a href="#MVP-presenter" class="headerlink" title="MVP presenter"></a>MVP presenter</h3><p>UserPresenter.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class UserPresenter &#123;</span><br><span class="line">    private IStudentModel iStudentModel;</span><br><span class="line">    private IMainView iMainView;</span><br><span class="line"></span><br><span class="line">    public UserPresenter(IMainView iMainView) &#123;</span><br><span class="line">        this.iMainView = iMainView;</span><br><span class="line">        iStudentModel = new StudentModel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void save(int id, String name, String sex) &#123;</span><br><span class="line">        iStudentModel.save(id,name,sex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void load(int id) &#123;</span><br><span class="line">        Student student=iStudentModel.load(id);</span><br><span class="line">        iMainView.setName(student.getName());</span><br><span class="line">        iMainView.setSex(student.getSex());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="MVP-View"><a href="#MVP-View" class="headerlink" title="MVP View"></a>MVP View</h3><p>IMainView.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public interface IMainView &#123;</span><br><span class="line"></span><br><span class="line">    void <span class="built_in">set</span>Name(String name);</span><br><span class="line"></span><br><span class="line">    void <span class="built_in">set</span>Sex(String sex);</span><br><span class="line"></span><br><span class="line">    int getId();</span><br><span class="line"></span><br><span class="line">    String getName();</span><br><span class="line"></span><br><span class="line">    String getSex();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MainActivity.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements View.OnClickListener, IMainView &#123;</span><br><span class="line"></span><br><span class="line">    private EditText et_id;</span><br><span class="line">    private EditText et_name;</span><br><span class="line">    private EditText et_sex;</span><br><span class="line">    private Button bt_save;</span><br><span class="line">    private Button bt_load;</span><br><span class="line"></span><br><span class="line">    private UserPresenter userPresenter;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        <span class="built_in">set</span>ContentView(R.layout.activity_login);</span><br><span class="line"></span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">initView</span></span>() &#123;</span><br><span class="line">        et_id = (EditText) findViewById(R.id.et_id);</span><br><span class="line">        et_name = (EditText) findViewById(R.id.et_name);</span><br><span class="line">        et_sex = (EditText) findViewById(R.id.et_sex);</span><br><span class="line">        bt_save = (Button) findViewById(R.id.bt_save);</span><br><span class="line">        bt_load = (Button) findViewById(R.id.bt_load);</span><br><span class="line"></span><br><span class="line">        bt_save.setOnClickListener(this);</span><br><span class="line">        bt_load.setOnClickListener(this);</span><br><span class="line"></span><br><span class="line">        userPresenter =new UserPresenter(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line"></span><br><span class="line">        switch (v.getId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.bt_save:</span><br><span class="line">                userPresenter.save(getId(),getName(),getSex());</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.bt_load:</span><br><span class="line">                userPresenter.load(getId());</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            default:</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void <span class="built_in">set</span>Name(String name) &#123;</span><br><span class="line">        et_name.setText(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void <span class="built_in">set</span>Sex(String sex) &#123;</span><br><span class="line">        et_sex.setText(sex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int <span class="function"><span class="title">getId</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> Integer.parseInt(et_id.getText().toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String <span class="function"><span class="title">getName</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> et_name.getText().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String <span class="function"><span class="title">getSex</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> et_sex.getText().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bean"><a href="#bean" class="headerlink" title="bean"></a>bean</h3><p>Student.java</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line"></span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private String sex;</span><br><span class="line"></span><br><span class="line">    public int <span class="function"><span class="title">getId</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void <span class="built_in">set</span>Id(int id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getName</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void <span class="built_in">set</span>Name(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getSex</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void <span class="built_in">set</span>Sex(String sex) &#123;</span><br><span class="line">        this.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是AndroidMVP的一个小demo，以上的源码我已经开源在Github,地址:<a href="https://github.com/HJXANDHMR/AndroidMVP" target="_blank" rel="external">AndroidMVP</a></p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android/">Android</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android/">Android</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/22/Android-MVPDetailed/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/22/Android-MVPDetailed/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/21/Android-ListViewReusePrinciple/" title="ListView复用原理和提升效率" itemprop="url">ListView复用原理和提升效率</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-21T12:59:40.408Z" itemprop="datePublished"> 发表于 2016-04-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="复用原理以及提升效率"><a href="#复用原理以及提升效率" class="headerlink" title="复用原理以及提升效率"></a>复用原理以及提升效率</h2><h3 id="复用item"><a href="#复用item" class="headerlink" title="复用item"></a>复用item</h3><p>ListView在加载数据的时候是会复用item的，即ListView是会缓存至少一屏幕的item.<br>如下图所示。<br><img src="/images/ListView/ListView_yuanli.jpg" alt=""></p>
<p>从图上可以看出当item1滚出屏幕，并且一个新的项目从屏幕底端上来时，ListView再请求一个视图。convertView此时不是空值了，它的值是item1。你只需设定新的数据然后返回convertView，不必重新创建一个视图。</p>
<h2 id="提高ListView的效率"><a href="#提高ListView的效率" class="headerlink" title="提高ListView的效率"></a>提高ListView的效率</h2><h3 id="最简单的使用ListView"><a href="#最简单的使用ListView" class="headerlink" title="最简单的使用ListView"></a>最简单的使用ListView</h3><p>没有复用convertView，每次都要重新创建,效率极其低下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line"></span><br><span class="line">           LayoutInflater layoutInflater = LayoutInflater.from(context);</span><br><span class="line">           convertView = layoutInflater.inflate(R.layout.listview_item, null);</span><br><span class="line">           TextView textView = (TextView) (convertView).findViewById(R.id.textview);</span><br><span class="line">           textView.setText(persons.get(position).getName());</span><br><span class="line">           <span class="built_in">return</span> convertView;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="复用convertView"><a href="#复用convertView" class="headerlink" title="复用convertView"></a>复用convertView</h3><p>利用 convertView 回收视图, 效率提高 200%<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line"></span><br><span class="line"> 		LayoutInflater layoutInflater = LayoutInflater.from(context);</span><br><span class="line">        <span class="keyword">if</span> (convertView == null) &#123;</span><br><span class="line">			 convertView = layoutInflater.inflate(R.layout.listview_item, null);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		TextView textView = (TextView) (convertView).findViewById(R.id.textview);</span><br><span class="line">		textView.setText(persons.get(position).getName());</span><br><span class="line">		<span class="built_in">return</span> convertView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用ViewHolder"><a href="#使用ViewHolder" class="headerlink" title="使用ViewHolder"></a>使用ViewHolder</h3><p>使用ViewHolder模式效率再提高50%</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">       ViewHolder holder;</span><br><span class="line">       <span class="keyword">if</span> (convertView == null) &#123;</span><br><span class="line">           LayoutInflater layoutInflater = LayoutInflater.from(context);</span><br><span class="line">           convertView = layoutInflater.inflate(R.layout.listview_item, null);</span><br><span class="line">           holder =new ViewHolder();</span><br><span class="line">           holder.textView = (TextView) (convertView).findViewById(R.id.textview);</span><br><span class="line">           convertView.setTag(holder);</span><br><span class="line"></span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           holder = (ViewHolder) convertView.getTag();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       holder.textView.setText(persons.get(position).getName());</span><br><span class="line">       <span class="built_in">return</span> convertView;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   class ViewHolder &#123;</span><br><span class="line">       private TextView textView;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>通过本篇博客应该明白了ListView是怎样复用，以及怎样提高ListView的工作效率了。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ListView/">ListView</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ListView/">ListView</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/21/Android-ListViewReusePrinciple/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/21/Android-ListViewReusePrinciple/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/19/Android-Utils/" title="Android 常用工具类" itemprop="url">Android 常用工具类</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-19T08:34:16.078Z" itemprop="datePublished"> 发表于 2016-04-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在Android开发中经常会使用到一些工具类，我这里收集了一些工具类。</p>
<h2 id="AppUtil"><a href="#AppUtil" class="headerlink" title="AppUtil"></a>AppUtil</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">package utils; </span><br><span class="line"> </span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.content.pm.PackageInfo;</span><br><span class="line">import android.content.pm.PackageManager;</span><br><span class="line"> </span><br><span class="line">/** </span><br><span class="line"> * app相关辅助类 </span><br><span class="line"> */ </span><br><span class="line">public class AppUtil &#123; </span><br><span class="line">    private <span class="function"><span class="title">AppUtil</span></span>() &#123; </span><br><span class="line">        /* cannot be instantiated*/ </span><br><span class="line">        throw new UnsupportedOperationException(<span class="string">"cannot be instantiated"</span>);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 获取应用程序名称 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @<span class="built_in">return</span> </span><br><span class="line">     */ </span><br><span class="line">    public static String getAppName(Context context) &#123;</span><br><span class="line"> </span><br><span class="line">        PackageManager packageManager = context.getPackageManager();</span><br><span class="line">        try &#123; </span><br><span class="line">            PackageInfo packageInfo = packageManager.getPackageInfo(context.getPackageName(), 0);</span><br><span class="line">            int labelRes = packageInfo.applicationInfo.labelRes;</span><br><span class="line">            <span class="built_in">return</span> context.getResources().getString(labelRes);</span><br><span class="line">        &#125; catch (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">return</span> null; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 获取应用程序版本名称信息 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @<span class="built_in">return</span> 当前应用的版本名称 </span><br><span class="line">     */ </span><br><span class="line">    public static String getVersionName(Context context) &#123;</span><br><span class="line">        try &#123; </span><br><span class="line">            PackageManager packageManager = context.getPackageManager();</span><br><span class="line">            PackageInfo packageInfo = packageManager.getPackageInfo(</span><br><span class="line">                    context.getPackageName(), 0);</span><br><span class="line">            <span class="built_in">return</span> packageInfo.versionName;</span><br><span class="line">        &#125; catch (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">return</span> null; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 获取应用程序的版本Code信息 </span><br><span class="line">     * @param context </span><br><span class="line">     * @<span class="built_in">return</span> 版本code </span><br><span class="line">     */ </span><br><span class="line">    public static int getVersionCode(Context context) &#123;</span><br><span class="line">        try &#123; </span><br><span class="line">            PackageManager packageManager = context.getPackageManager();</span><br><span class="line">            PackageInfo packageInfo = packageManager.getPackageInfo(context.getPackageName(), 0);</span><br><span class="line">            <span class="built_in">return</span> packageInfo.versionCode;</span><br><span class="line">        &#125; catch (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">return</span> 0; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="FileUtil"><a href="#FileUtil" class="headerlink" title="FileUtil"></a>FileUtil</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">package utils;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 文件操作工具类</span><br><span class="line"> */</span><br><span class="line">public class FileUtil &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 在指定的位置创建指定的文件</span><br><span class="line">     *</span><br><span class="line">     * @param filePath 完整的文件路径</span><br><span class="line">     * @param mkdir 是否创建相关的文件夹</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static void mkFile(String filePath, boolean mkdir) throws Exception &#123;</span><br><span class="line">        File file = new File(filePath);</span><br><span class="line">        file.getParentFile().mkdirs();</span><br><span class="line">        file.createNewFile();</span><br><span class="line">        file = null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 在指定的位置创建文件夹</span><br><span class="line">     *</span><br><span class="line">     * @param dirPath 文件夹路径</span><br><span class="line">     * @<span class="built_in">return</span> 若创建成功，则返回True；反之，则返回False</span><br><span class="line">     */</span><br><span class="line">    public static boolean mkDir(String dirPath) &#123;</span><br><span class="line">        <span class="built_in">return</span> new File(dirPath).mkdirs();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除指定的文件</span><br><span class="line">     *</span><br><span class="line">     * @param filePath 文件路径</span><br><span class="line">     *</span><br><span class="line">     * @<span class="built_in">return</span> 若删除成功，则返回True；反之，则返回False</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    public static boolean delFile(String filePath) &#123;</span><br><span class="line">        <span class="built_in">return</span> new File(filePath).delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除指定的文件夹</span><br><span class="line">     *</span><br><span class="line">     * @param dirPath 文件夹路径</span><br><span class="line">     * @param delFile 文件夹中是否包含文件</span><br><span class="line">     * @<span class="built_in">return</span> 若删除成功，则返回True；反之，则返回False</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    public static boolean delDir(String dirPath, boolean delFile) &#123;</span><br><span class="line">        <span class="keyword">if</span> (delFile) &#123;</span><br><span class="line">            File file = new File(dirPath);</span><br><span class="line">            <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">                <span class="built_in">return</span> file.delete();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (file.listFiles().length == 0) &#123;</span><br><span class="line">                    <span class="built_in">return</span> file.delete();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    int zfiles = file.listFiles().length;</span><br><span class="line">                    File[] delfile = file.listFiles();</span><br><span class="line">                    <span class="keyword">for</span> (int i = 0; i &lt; zfiles; i++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (delfile[i].isDirectory()) &#123;</span><br><span class="line">                            delDir(delfile[i].getAbsolutePath(), <span class="literal">true</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        delfile[i].delete();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">return</span> file.delete();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">return</span> new File(dirPath).delete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 复制文件/文件夹 若要进行文件夹复制，请勿将目标文件夹置于源文件夹中</span><br><span class="line">     * @param <span class="built_in">source</span> 源文件（夹）</span><br><span class="line">     * @param target 目标文件（夹）</span><br><span class="line">     * @param isFolder 若进行文件夹复制，则为True；反之为False</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static void copy(String <span class="built_in">source</span>, String target, boolean isFolder)</span><br><span class="line">            throws Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFolder) &#123;</span><br><span class="line">            (new File(target)).mkdirs();</span><br><span class="line">            File a = new File(<span class="built_in">source</span>);</span><br><span class="line">            String[] file = a.list();</span><br><span class="line">            File temp = null;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; file.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (source.endsWith(File.separator)) &#123;</span><br><span class="line">                    temp = new File(<span class="built_in">source</span> + file[i]);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    temp = new File(<span class="built_in">source</span> + File.separator + file[i]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (temp.isFile()) &#123;</span><br><span class="line">                    FileInputStream input = new FileInputStream(temp);</span><br><span class="line">                    FileOutputStream output = new FileOutputStream(target + <span class="string">"/"</span> + (temp.getName()).toString());</span><br><span class="line">                    byte[] b = new byte[1024];</span><br><span class="line">                    int len;</span><br><span class="line">                    <span class="keyword">while</span> ((len = input.read(b)) != -1) &#123;</span><br><span class="line">                        output.write(b, 0, len);</span><br><span class="line">                    &#125;</span><br><span class="line">                    output.flush();</span><br><span class="line">                    output.close();</span><br><span class="line">                    input.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (temp.isDirectory()) &#123;</span><br><span class="line">                    copy(<span class="built_in">source</span> + <span class="string">"/"</span> + file[i], target + <span class="string">"/"</span> + file[i], <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            int byteread = 0;</span><br><span class="line">            File oldfile = new File(<span class="built_in">source</span>);</span><br><span class="line">            <span class="keyword">if</span> (oldfile.exists()) &#123;</span><br><span class="line">                InputStream <span class="keyword">in</span>Stream = new FileInputStream(<span class="built_in">source</span>);</span><br><span class="line">                File file = new File(target);</span><br><span class="line">                file.getParentFile().mkdirs();</span><br><span class="line">                file.createNewFile();</span><br><span class="line">                FileOutputStream fs = new FileOutputStream(file);</span><br><span class="line">                byte[] buffer = new byte[1024];</span><br><span class="line">                <span class="keyword">while</span> ((byteread = <span class="keyword">in</span>Stream.read(buffer)) != -1) &#123;</span><br><span class="line">                    fs.write(buffer, 0, byteread);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">in</span>Stream.close();</span><br><span class="line">                fs.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 移动指定的文件（夹）到目标文件（夹）</span><br><span class="line">     * @param <span class="built_in">source</span> 源文件（夹）</span><br><span class="line">     * @param target 目标文件（夹）</span><br><span class="line">     * @param isFolder 若为文件夹，则为True；反之为False</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static boolean move(String <span class="built_in">source</span>, String target, boolean isFolder)</span><br><span class="line">            throws Exception &#123;</span><br><span class="line">        copy(<span class="built_in">source</span>, target, isFolder);</span><br><span class="line">        <span class="keyword">if</span> (isFolder) &#123;</span><br><span class="line">            <span class="built_in">return</span> delDir(<span class="built_in">source</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">return</span> delFile(<span class="built_in">source</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="LogUtil"><a href="#LogUtil" class="headerlink" title="LogUtil"></a>LogUtil</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package utils; </span><br><span class="line"> </span><br><span class="line">import android.util.Log;</span><br><span class="line"> </span><br><span class="line">/** </span><br><span class="line"> * Log统一管理类 </span><br><span class="line"> */ </span><br><span class="line">public class LogUtil &#123; </span><br><span class="line"> </span><br><span class="line">    private <span class="function"><span class="title">LogUtil</span></span>() &#123; </span><br><span class="line">        /* cannot be instantiated */ </span><br><span class="line">        throw new UnsupportedOperationException(<span class="string">"cannot be instantiated"</span>);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    // 是否需要打印bug，可以在application的onCreate函数里面初始化 </span><br><span class="line">    public static boolean isDebug = <span class="literal">true</span>;</span><br><span class="line">    private static final String TAG = <span class="string">"LogUtil"</span>;</span><br><span class="line"> </span><br><span class="line">    // 下面四个是默认tag的函数 </span><br><span class="line">    public static void i(String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.i(TAG, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void d(String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.d(TAG, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void e(String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.e(TAG, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void v(String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.v(TAG, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    // 下面是传入自定义tag的函数 </span><br><span class="line">    public static void i(String tag, String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.i(tag, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void d(String tag, String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.i(tag, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void e(String tag, String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.i(tag, msg);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    public static void v(String tag, String msg)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span> (isDebug)</span><br><span class="line">            Log.i(tag, msg);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SPUtil"><a href="#SPUtil" class="headerlink" title="SPUtil"></a>SPUtil</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">package utils; </span><br><span class="line"> </span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.content.SharedPreferences;</span><br><span class="line"> </span><br><span class="line">import java.lang.reflect.InvocationTargetException;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.Map;</span><br><span class="line"> </span><br><span class="line">/** </span><br><span class="line"> * SharedPreferences统一管理类 </span><br><span class="line"> */ </span><br><span class="line">public class SPUtil &#123; </span><br><span class="line">    /** </span><br><span class="line">     * 保存在手机里面的文件名 </span><br><span class="line">     */ </span><br><span class="line">    public static final String FILE_NAME = <span class="string">"share_data"</span>;</span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 保存数据的方法，我们需要拿到保存数据的具体类型，然后根据类型调用不同的保存方法 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @param object </span><br><span class="line">     */ </span><br><span class="line">    public static void put(Context context, String key, Object object) &#123;</span><br><span class="line"> </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (object instanceof String) &#123;</span><br><span class="line">            editor.putString(key, (String) object);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (object instanceof Integer) &#123;</span><br><span class="line">            editor.putInt(key, (Integer) object);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (object instanceof Boolean) &#123;</span><br><span class="line">            editor.putBoolean(key, (Boolean) object);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (object instanceof Float) &#123;</span><br><span class="line">            editor.putFloat(key, (Float) object);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (object instanceof Long) &#123;</span><br><span class="line">            editor.putLong(key, (Long) object);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">            editor.putString(key, object.toString());</span><br><span class="line">        &#125; </span><br><span class="line">        SharedPreferencesCompat.apply(editor);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 得到保存数据的方法，我们根据默认值得到保存的数据的具体类型，然后调用相对于的方法获取值 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @param defaultObject </span><br><span class="line">     * @<span class="built_in">return</span> </span><br><span class="line">     */ </span><br><span class="line">    public static Object get(Context context, String key, Object defaultObject)</span><br><span class="line">    &#123; </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (defaultObject instanceof String) &#123;</span><br><span class="line">            <span class="built_in">return</span> sp.getString(key, (String) defaultObject);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObject instanceof Integer) &#123;</span><br><span class="line">            <span class="built_in">return</span> sp.getInt(key, (Integer) defaultObject);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObject instanceof Boolean) &#123;</span><br><span class="line">            <span class="built_in">return</span> sp.getBoolean(key, (Boolean) defaultObject);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObject instanceof Float) &#123;</span><br><span class="line">            <span class="built_in">return</span> sp.getFloat(key, (Float) defaultObject);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (defaultObject instanceof Long) &#123;</span><br><span class="line">            <span class="built_in">return</span> sp.getLong(key, (Long) defaultObject);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">return</span> null; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 移除某个key值已经对应的值 </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     */ </span><br><span class="line">    public static void remove(Context context, String key) &#123;</span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();</span><br><span class="line">        editor.remove(key);</span><br><span class="line">        SharedPreferencesCompat.apply(editor);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 清除所有数据 </span><br><span class="line">     * @param context </span><br><span class="line">     */ </span><br><span class="line">    public static void clear(Context context) &#123;</span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();</span><br><span class="line">        editor.clear();</span><br><span class="line">        SharedPreferencesCompat.apply(editor);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 查询某个key是否已经存在 </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @<span class="built_in">return</span> </span><br><span class="line">     */ </span><br><span class="line">    public static boolean contains(Context context, String key) &#123;</span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line">        <span class="built_in">return</span> sp.contains(key);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 返回所有的键值对 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @<span class="built_in">return</span> </span><br><span class="line">     */ </span><br><span class="line">    public static Map&lt;String, ?&gt; getAll(Context context) &#123;</span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,</span><br><span class="line">                Context.MODE_PRIVATE);</span><br><span class="line">        <span class="built_in">return</span> sp.getAll();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 创建一个解决SharedPreferencesCompat.apply方法的一个兼容类 </span><br><span class="line">     * </span><br><span class="line">     * @author zhy </span><br><span class="line">     * </span><br><span class="line">     */ </span><br><span class="line">    private static class SharedPreferencesCompat &#123; </span><br><span class="line">        private static final Method sApplyMethod = findApplyMethod();</span><br><span class="line"> </span><br><span class="line">        /** </span><br><span class="line">         * 反射查找apply的方法 </span><br><span class="line">         * </span><br><span class="line">         * @<span class="built_in">return</span> </span><br><span class="line">         */ </span><br><span class="line">        @SuppressWarnings(&#123; <span class="string">"unchecked"</span>, <span class="string">"rawtypes"</span> &#125;) </span><br><span class="line">        private static Method <span class="function"><span class="title">findApplyMethod</span></span>() &#123;</span><br><span class="line">            try &#123; </span><br><span class="line">                Class clz = SharedPreferences.Editor.class;</span><br><span class="line">                <span class="built_in">return</span> clz.getMethod(<span class="string">"apply"</span>);</span><br><span class="line">            &#125; catch (NoSuchMethodException e) &#123;</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="built_in">return</span> null; </span><br><span class="line">        &#125; </span><br><span class="line"> </span><br><span class="line">        /** </span><br><span class="line">         * 如果找到则使用apply执行，否则使用commit </span><br><span class="line">         * </span><br><span class="line">         * @param editor </span><br><span class="line">         */ </span><br><span class="line">        public static void apply(SharedPreferences.Editor editor) &#123;</span><br><span class="line">            try &#123; </span><br><span class="line">                <span class="keyword">if</span> (sApplyMethod != null) &#123;</span><br><span class="line">                    sApplyMethod.invoke(editor);</span><br><span class="line">                    <span class="built_in">return</span>; </span><br><span class="line">                &#125; </span><br><span class="line">            &#125; catch (IllegalArgumentException e) &#123;</span><br><span class="line">            &#125; catch (IllegalAccessException e) &#123;</span><br><span class="line">            &#125; catch (InvocationTargetException e) &#123;</span><br><span class="line">            &#125; </span><br><span class="line">            editor.commit();</span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ToastUtil"><a href="#ToastUtil" class="headerlink" title="ToastUtil"></a>ToastUtil</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">package utils; </span><br><span class="line"> </span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line"> </span><br><span class="line">/** </span><br><span class="line"> * Toast统一管理类 </span><br><span class="line"> */ </span><br><span class="line">public class ToastUtil &#123; </span><br><span class="line"> </span><br><span class="line">    public static boolean isShow = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">    /*cannot be instantiated*/ </span><br><span class="line">    private <span class="function"><span class="title">ToastUtil</span></span>()&#123; </span><br><span class="line">        throw new UnsupportedOperationException(<span class="string">"cannot be instantiated"</span>);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 短时间显示Toast </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     */ </span><br><span class="line">    public static void showShort(Context context, CharSequence message) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 短时间显示Toast </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     */ </span><br><span class="line">    public static void showShort(Context context, int message) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 长时间显示Toast </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     */ </span><br><span class="line">    public static void showLong(Context context, CharSequence message) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 长时间显示Toast </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     */ </span><br><span class="line">    public static void showLong(Context context, int message) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 自定义显示Toast时间 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     * @param duration </span><br><span class="line">     */ </span><br><span class="line">    public static void show(Context context, CharSequence message, int duration) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, duration).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    /** </span><br><span class="line">     * 自定义显示Toast时间 </span><br><span class="line">     * </span><br><span class="line">     * @param context </span><br><span class="line">     * @param message </span><br><span class="line">     * @param duration </span><br><span class="line">     */ </span><br><span class="line">    public static void show(Context context, int message, int duration) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isShow)</span><br><span class="line">            Toast.makeText(context, message, duration).show();</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上几个工具类都是Android开发必备的工具类，以上的工具类我都放到<a href="https://github.com/HJXANDHMR" target="_blank" rel="external">Github</a>上了，<a href="https://github.com/HJXANDHMR/AndroidUtils" target="_blank" rel="external">AndroidUtils</a>,感兴趣的朋友可以和我一起来维护这个开源项目。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android工具类/">Android工具类</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android工具类/">Android工具类</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/19/Android-Utils/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/19/Android-Utils/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/18/hexo-AddCommentAndAccessNumber/" title="Hexo 中添加访问数和增加评论" itemprop="url">Hexo 中添加访问数和增加评论</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-18T11:38:28.316Z" itemprop="datePublished"> 发表于 2016-04-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>今天我们来学习怎样统计网站的访问量以及怎样添加评论功能</p>
<h2 id="统计网站的访问量"><a href="#统计网站的访问量" class="headerlink" title="统计网站的访问量"></a>统计网站的访问量</h2><p>现在主流的统计网站的工具有谷歌统计，百度统计，但我们今天可以用<a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">不蒜子</a>来统计，这个工具只需要两行代码就可以完成统计。</p>
<h3 id="安装脚本（必选）"><a href="#安装脚本（必选）" class="headerlink" title="安装脚本（必选）"></a>安装脚本（必选）</h3><p>不蒜子可以给任何类型的个人站点使用，如果你是用的hexo，打开themes/你的主题/layout/_partial/footer.ejs添加下述脚本即可。当然你可以添加当网页的任意位置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="添加标签"><a href="#添加标签" class="headerlink" title="添加标签"></a>添加标签</h3><p>需要复制相应的html标签到你的网站要显示访问量的位置即可。您可以随意更改不蒜子标签为自己喜欢的显示效果。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;span id=<span class="string">"busuanzi_container_site_pv"</span>&gt;</span><br><span class="line">    本站总访问量&lt;span id=<span class="string">"busuanzi_value_site_pv"</span>&gt;&lt;/span&gt;次</span><br><span class="line">&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span id=<span class="string">"busuanzi_container_site_uv"</span>&gt;</span><br><span class="line">  本站访客数&lt;span id=<span class="string">"busuanzi_value_site_uv"</span>&gt;&lt;/span&gt;人次</span><br><span class="line">&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span id=<span class="string">"busuanzi_container_page_pv"</span>&gt;</span><br><span class="line">  本文总阅读量&lt;span id=<span class="string">"busuanzi_value_page_pv"</span>&gt;&lt;/span&gt;次</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p>我是用hexo 的jacman主题的我是添加在themes/jacman/layout/_partial/footer.ejs下的，列如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;p class=<span class="string">"copyright"</span>&gt;</span><br><span class="line">		Powered by &lt;a href=<span class="string">"http://hexo.io"</span> target=<span class="string">"_blank"</span> title=<span class="string">"hexo"</span>&gt;hexo&lt;/a&gt; and Theme by &lt;a href=<span class="string">"https://github.com/wuchong/jacman"</span> target=<span class="string">"_blank"</span> title=<span class="string">"Jacman"</span>&gt;Jacman&lt;/a&gt; © &lt;%= new Date().getFullYear() %&gt; </span><br><span class="line">		&lt;% <span class="keyword">if</span> (config.author) &#123; %&gt;</span><br><span class="line">		&lt;a href=<span class="string">"&lt;%= config.root %&gt;about"</span> target=<span class="string">"_blank"</span> title=<span class="string">"&lt;%= config.author %&gt;"</span>&gt;&lt;%= config.author %&gt;&lt;/a&gt;</span><br><span class="line">		&lt;% &#125; <span class="keyword">else</span> &#123;%&gt;</span><br><span class="line">		&lt;a href=<span class="string">"&lt;%= config.url %&gt;"</span> title=<span class="string">"&lt;%= config.title %&gt;"</span>&gt;&lt;%= config.title %&gt;&lt;/a&gt;</span><br><span class="line">		&lt;% &#125; %&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;script async src=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">		&lt;/br&gt;本站总访问量&lt;span id=<span class="string">"busuanzi_value_site_pv"</span>&gt;&lt;/span&gt;次,本站访客数&lt;span id=<span class="string">"busuanzi_value_site_uv"</span>&gt;&lt;/span&gt;人次,本文总阅读量&lt;span id=<span class="string">"busuanzi_value_page_pv"</span>&gt;&lt;/span&gt;次</span><br><span class="line"></span><br><span class="line">		&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>是添加在版权信息下面，读者也可以添加其它地方。</p>
<h2 id="添加评论功能"><a href="#添加评论功能" class="headerlink" title="添加评论功能"></a>添加评论功能</h2><p>评论功能大陆地区最好用的就是<a href="http://duoshuo.com/" target="_blank" rel="external">多说</a>,可以去注册个账号，jacman主题里面已经<br>实现了这个功能，你只需要注册个账号将用户名添加进去就可以了。<br>打开jacman主题文件下的_config.yml文件，找到多说设置的地方。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### Comment</span></span><br><span class="line">duoshuo_shortname: hjxandhmr   <span class="comment">## 在这里添加多说的域名,比如我的域名是这个hjxandhmr.duoshuo.com，只需要填hjxandhmr就可以了</span></span><br></pre></td></tr></table></figure></p>
<p>到这为止，统计网站访问数和评论功能我们都已经实现了，赶快去试试吧。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/hexo/">hexo</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/hexo/">hexo</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/18/hexo-AddCommentAndAccessNumber/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/18/hexo-AddCommentAndAccessNumber/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/18/AndroidStudio-ConfigureGenymotion/" title="Android Studio中配置Genymotion" itemprop="url">Android Studio中配置Genymotion</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-18T06:01:08.912Z" itemprop="datePublished"> 发表于 2016-04-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Android Studio中是开发Android的必备神器，今天我们就来聊聊Android studio的插件Genymotion怎样在Android studio中配置</p>
<h2 id="下载Genymotion插件"><a href="#下载Genymotion插件" class="headerlink" title="下载Genymotion插件"></a>下载Genymotion插件</h2><p>打开设置界面<br><img src="/images/AndroidStudio/AndroidStudio_open_setting.png" alt=""></p>
<p>然后点击Plugins,在搜索框里输入Genymotion，在点击右边的Install，因为我已经安装好了，图上显示的是Uninstall<br><img src="/images/AndroidStudio/AndroidStudio_anzhuang_genymotion.png" alt=""></p>
<h2 id="配置Genymotion插件"><a href="#配置Genymotion插件" class="headerlink" title="配置Genymotion插件"></a>配置Genymotion插件</h2><p>点击设置界面最下面的Other Setting,然后输入Genymotion的安装路径</p>
<p><img src="/images/AndroidStudio/AndroidStudio_configure_genymotion.png" alt=""></p>
<p>安装好了Genymotion,要重新启动AndroidStudio 才会生效，然后就会在工具栏多出一个图标，点击它：</p>
<p><img src="/images/AndroidStudio/AndroidStudio_start_genymotion.png" alt=""></p>
<p>然后选择启动模拟机就可以了<br><img src="/images/AndroidStudio/AndroidStudio_start_genymotionSelect.png" alt=""></p>
<p>到了这一步，恭喜你，Genymotion插件就安装成功了，就不需要每次还要单独启动Genymotion了。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/AndroidStudio/">AndroidStudio</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/AndroidStudio/">AndroidStudio</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/18/AndroidStudio-ConfigureGenymotion/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/18/AndroidStudio-ConfigureGenymotion/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/17/Android-WCFConnect/" title="Android 调用WCF接口" itemprop="url">Android 调用WCF接口</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-17T10:20:03.177Z" itemprop="datePublished"> 发表于 2016-04-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>有些时候由于项目的需要客户端用Android实现，服务器用.NET来实现，那么Android客户端怎样连接服务器呢？<br>当然是通过WCF来连接，今天我们就来讲讲怎样连接WCF.</p>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="WCF测试工具"><a href="#WCF测试工具" class="headerlink" title="WCF测试工具"></a>WCF测试工具</h3><p>在进行Android客户端开发的时候，每次调用接口需要WCF测试工具去测试，因为你不知道接口是不是正常的，<br>以及返回信息的格式，通过WCF测试工具就可以很轻松的测试接口以及知道返回结果信息，一般WCF返回的都是XML，<br>可以根据返回的XML去解析，取出你所需要的数据。</p>
<p><strong>WCF测试工具的下载地址</strong><br><a href="http://download.csdn.net/detail/qq_14906597/9493881" target="_blank" rel="external">WCF测试工具</a></p>
<h3 id="ksoap2jar包下载"><a href="#ksoap2jar包下载" class="headerlink" title="ksoap2jar包下载"></a>ksoap2jar包下载</h3><p>我们需要下载个jar包，里面封装了很多方法<br><a href="http://download.csdn.net/detail/leesmn/5162649" target="_blank" rel="external">ksoap2jar包</a></p>
<h2 id="Android客户端调用WCF"><a href="#Android客户端调用WCF" class="headerlink" title="Android客户端调用WCF"></a>Android客户端调用WCF</h2><h3 id="封装工具类"><a href="#封装工具类" class="headerlink" title="封装工具类"></a>封装工具类</h3><p>我们可以把调用WCF接口封装成一个一个工具类，当需要你们需要调用WCF接口，可以直接拿来用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">package com.example.tomorrow.mobileoa.utils;</span><br><span class="line"></span><br><span class="line">import android.os.Handler;</span><br><span class="line">import android.os.Message;</span><br><span class="line">import android.util.Log;</span><br><span class="line"></span><br><span class="line">import org.apache.http.client.HttpResponseException;</span><br><span class="line">import org.ksoap2.SoapEnvelope;</span><br><span class="line">import org.ksoap2.serialization.SoapObject;</span><br><span class="line">import org.ksoap2.serialization.SoapSerializationEnvelope;</span><br><span class="line">import org.ksoap2.transport.HttpTransportSE;</span><br><span class="line">import org.xmlpull.v1.XmlPullParserException;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.concurrent.ExecutorService;</span><br><span class="line">import java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line">public class WebServiceUtils &#123;</span><br><span class="line"></span><br><span class="line">    //服务器IP地址，也可以是域名</span><br><span class="line">    public static final String WEB_SERVER_IP = <span class="string">"218.75.131.83:8012"</span>;</span><br><span class="line">    public static final String WEB_SERVER_URL = <span class="string">"http://"</span> + WEB_SERVER_IP + <span class="string">"/SystemService.svc"</span>;</span><br><span class="line">    //命名空间</span><br><span class="line">    private static final String NAMESPACE = <span class="string">"http://www.mt178.com"</span>;</span><br><span class="line">    public static final String SOAP = <span class="string">"http://www.mt178.com/SystemService/"</span>;</span><br><span class="line">    // 含有5个线程的线程池  </span><br><span class="line">    private static final ExecutorService executorService = Executors</span><br><span class="line">            .newFixedThreadPool(5);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param url</span><br><span class="line">     * @param methodName</span><br><span class="line">     * @param properties</span><br><span class="line">     * @param webServiceCallBack</span><br><span class="line">     */</span><br><span class="line">    public static void callWebService(String url, final String methodName,</span><br><span class="line">                                      Map properties,</span><br><span class="line">                                      final WebServiceCallBack webServiceCallBack) &#123;</span><br><span class="line">        final HttpTransportSE httpTransportSE = new HttpTransportSE(url, 30 * 1000);</span><br><span class="line">        SoapObject soapObject = new SoapObject(NAMESPACE, methodName);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (properties != null) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; it = properties.entrySet()</span><br><span class="line">                    .iterator(); it.hasNext(); ) &#123;</span><br><span class="line">                Map.Entry&lt;String, Object&gt; entry = it.next();</span><br><span class="line">                soapObject.addProperty(entry.getKey(), entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        final SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(</span><br><span class="line">                SoapEnvelope.VER11);</span><br><span class="line">        soapEnvelope.setOutputSoapObject(soapObject);</span><br><span class="line">        soapEnvelope.dotNet = <span class="literal">true</span>;</span><br><span class="line">        httpTransportSE.debug = <span class="literal">true</span>;</span><br><span class="line">        final Handler mHandler = new <span class="function"><span class="title">Handler</span></span>() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void handleMessage(Message msg) &#123;</span><br><span class="line">                super.handleMessage(msg);</span><br><span class="line">                webServiceCallBack.callBack((SoapObject) msg.obj);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">		// 开启线程去访问WebService </span><br><span class="line">        executorService.submit(new <span class="function"><span class="title">Runnable</span></span>() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void <span class="function"><span class="title">run</span></span>() &#123;</span><br><span class="line">                SoapObject resultSoapObject = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    httpTransportSE.call(SOAP + methodName, soapEnvelope);</span><br><span class="line">                    System.out.print(soapEnvelope.getResponse().toString());</span><br><span class="line">                    <span class="keyword">if</span> (soapEnvelope.getResponse() != null) &#123;</span><br><span class="line">                        resultSoapObject = (SoapObject) soapEnvelope.bodyIn;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; catch (HttpResponseException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; catch (XmlPullParserException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    mHandler.sendMessage(mHandler.obtainMessage(0,</span><br><span class="line">                            resultSoapObject));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public interface WebServiceCallBack &#123;</span><br><span class="line">        void callBack(SoapObject result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调用WCF"><a href="#调用WCF" class="headerlink" title="调用WCF"></a>调用WCF</h3><p>前面已经封装了访问WCF接口的工具类，现在就来写怎样调用工具类<br>这里是调用WCF服务器的LoginAccount()方法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//map中存放的参数一定是序列化，否则调用WCF就回报错，我这里提供一种解决方法。</span><br><span class="line">Map map = Collections.synchronizedMap(new LinkedHashMap());</span><br><span class="line">//这里的key根据WCF测试工具测的参数名来填，又几个参数就添加几个</span><br><span class="line">map.put(key, value);</span><br><span class="line"></span><br><span class="line">WebServiceUtils.callWebService(WebServiceUtils.WEB_SERVER_URL, <span class="string">"LoginAccount"</span>,</span><br><span class="line">                map, new WebServiceUtils.<span class="function"><span class="title">WebServiceCallBack</span></span>() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void callBack(SoapObject result) &#123;</span><br><span class="line">                    	//判断服务器返回的消息</span><br><span class="line">                        <span class="keyword">if</span> (result != null) &#123;</span><br><span class="line">                        	//这里是根据服务器返回的XML信息进行解析</span><br><span class="line">                           ........</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            Log.i(TAG,<span class="string">"服务器返回消息为空"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br></pre></td></tr></table></figure>
<p>到这为此，已经基本学会Android怎样调用WCF方法，具体的代码实现还要根据服务器返回的结果来写。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/WCF/">WCF</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/WCF/">WCF</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/17/Android-WCFConnect/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/17/Android-WCFConnect/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/17/Android-ListviewAndCheckButtonproblem/" title="ListView与CheckBox混合使用的常见问题" itemprop="url">ListView与CheckBox混合使用的常见问题</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="何健雄" target="_blank" itemprop="author">何健雄</a>
		
  <p class="article-time">
    <time datetime="2016-04-17T04:00:23.799Z" itemprop="datePublished"> 发表于 2016-04-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在Android开发中我们接触比较多的控件就是ListView了 ,在使用ListView的时候也会遇到很多问题，今天我们就来聊聊，<br>当ListView中使用CheckBoxs时遇到的问题。</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>当我们要在ListView中用CheckBox来实现一个多选的功能，但遇到了一个问题，当选中item时，滑动页面的时候出现了假选的情况，本来没有选中的item，滑动页面的时候选中了。</p>
<h2 id="解决问题的思路"><a href="#解决问题的思路" class="headerlink" title="解决问题的思路"></a>解决问题的思路</h2><p>用HashMap来记录一个CheckBox的勾选记录</p>
<h2 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h2><p>由于ListView和CheckBox我们经常使用，布局代码和Activity的代码就不给出来了，只给出最关键的Adapter代码。<br>布局代码就是一个TextView用来显示名字，一个CheckBox用来勾选item.</p>
<p>ListViewAdapter的实现代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">public class ListViewAdapter extends BaseAdapter &#123;  </span><br><span class="line">  </span><br><span class="line">    private Context context;  </span><br><span class="line">    private String[] beans;  </span><br><span class="line">  </span><br><span class="line">    // 用来控制CheckBox的选中状况  </span><br><span class="line">    private static HashMap&lt;Integer, Boolean&gt; isSelected;  </span><br><span class="line">  </span><br><span class="line">    class ViewHolder &#123;  </span><br><span class="line">        TextView tvName;  </span><br><span class="line">        CheckBox cb;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public ListViewAdapter(Context context, String[] beans) &#123;  </span><br><span class="line">        this.beans = beans;  </span><br><span class="line">        this.context = context;  </span><br><span class="line">        isSelected = new HashMap&lt;Integer, Boolean&gt;();  </span><br><span class="line">        // 初始化数据  </span><br><span class="line">        initDate();  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    // 初始化isSelected的数据  </span><br><span class="line">    private void <span class="function"><span class="title">initDate</span></span>() &#123;  </span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; beans.length; i++) &#123;  </span><br><span class="line">        	//初始化时将所有的选中记录清空</span><br><span class="line">            getIsSelected().put(i, <span class="literal">false</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public int <span class="function"><span class="title">getCount</span></span>() &#123;  </span><br><span class="line">        <span class="built_in">return</span> beans.length;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public Object getItem(int position) &#123;  </span><br><span class="line">        <span class="built_in">return</span> beans[position];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public long getItemId(int position) &#123;  </span><br><span class="line">        <span class="built_in">return</span> position;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    @Override  </span><br><span class="line">    public View getView(final int position, View convertView, ViewGroup parent) &#123;  </span><br><span class="line">        ViewHolder holder;  </span><br><span class="line">        String bean = beans[position];  </span><br><span class="line">        LayoutInflater inflater = LayoutInflater.from(context);  </span><br><span class="line">        <span class="keyword">if</span> (convertView == null) &#123;  </span><br><span class="line">            convertView = inflater.inflate(  </span><br><span class="line">                    R.layout.assist_device_binding_list_item, null);  </span><br><span class="line">            holder = new ViewHolder();  </span><br><span class="line">            holder.cb = (CheckBox) convertView.findViewById(R.id.checkBox1);  </span><br><span class="line">            holder.tvName = (TextView) convertView  </span><br><span class="line">                    .findViewById(R.id.tv_device_name);  </span><br><span class="line">            convertView.setTag(holder);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            // 取出holder  </span><br><span class="line">            holder = (ViewHolder) convertView.getTag();  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        holder.tvName.setText(bean);  </span><br><span class="line">        // 监听checkBox并根据原来的状态来设置新的状态  </span><br><span class="line">        holder.cb.setOnClickListener(new View.<span class="function"><span class="title">OnClickListener</span></span>() &#123;  </span><br><span class="line">            public void onClick(View v) &#123;  </span><br><span class="line">                <span class="keyword">if</span> (isSelected.get(position)) &#123;  </span><br><span class="line">                    isSelected.put(position, <span class="literal">false</span>);  </span><br><span class="line">                    <span class="built_in">set</span>IsSelected(isSelected);  </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                    isSelected.put(position, <span class="literal">true</span>);  </span><br><span class="line">                    <span class="built_in">set</span>IsSelected(isSelected);  </span><br><span class="line">                &#125;  </span><br><span class="line">  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;);  </span><br><span class="line">  </span><br><span class="line">        // 根据isSelected来设置checkbox的选中状况  </span><br><span class="line">        holder.cb.setChecked(getIsSelected().get(position));  </span><br><span class="line">        <span class="built_in">return</span> convertView;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public static HashMap&lt;Integer, Boolean&gt; <span class="function"><span class="title">getIsSelected</span></span>() &#123;  </span><br><span class="line">        <span class="built_in">return</span> isSelected;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    public static void <span class="built_in">set</span>IsSelected(HashMap&lt;Integer, Boolean&gt; isSelected) &#123;  </span><br><span class="line">        ListViewAdapter.isSelected = isSelected;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用HashMap来记录一个CheckBox的勾选记录,每次滑动的时候CheckBox只需要读取HashMap里面的值，<br>再来进行显示，这样就不会出现假选的情况了。</p>
<p><strong>欢迎大家关注我的微信公众号，我会不定期的分享些Android开发的技巧</strong></p>
<p><img src="/images/weixing.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ListView/">ListView</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ListView/">ListView</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/17/Android-ListviewAndCheckButtonproblem/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/04/17/Android-ListviewAndCheckButtonproblem/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Android/" title="Android">Android<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android-NDK/" title="Android NDK">Android NDK<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AndroidStudio/" title="AndroidStudio">AndroidStudio<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android工具类/" title="Android工具类">Android工具类<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ListView/" title="ListView">ListView<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/WCF/" title="WCF">WCF<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ListView/" title="ListView">ListView<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Android/" title="Android">Android<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Android-NDK/" title="Android NDK">Android NDK<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Android工具类/" title="Android工具类">Android工具类<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AndroidStudio/" title="AndroidStudio">AndroidStudio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/WCF/" title="WCF">WCF<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Markdown/" title="Markdown">Markdown<sup>1</sup></a></li>
			
		
		</ul>
</div>


  


  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="HJXANDHMR" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.csdn.net/qq_14906597" target="_blank" title="一个面向程序员交流分享的新一代社区">csdn博客</a>
            
          </li>
        
    </ul>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> Hello ,I&#39;m hjx  <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/hjxandhmr" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/HJXANDHMR" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="何健雄">何健雄</a>
		
		
		<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
		</script>
		</br>本站总访问量<span id="busuanzi_value_site_pv"></span>次,本站访客数<span id="busuanzi_value_site_uv"></span>人次,本文总阅读量<span id="busuanzi_value_page_pv"></span>次

		</p>
</div>


</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
